<project name="Online Review and Tools Dependency Import" basedir=".">
    <condition property="is_windows">
        <and>
            <os family="windows"/>
        </and>
    </condition>

    <condition property="is_unix">
        <and>
            <os family="unix"/>
        </and>
    </condition>

    <property name="tcs_libdir" value="${online_review_home}/lib/tcs" />
    <property name="ext_libdir" value="${online_review_home}/lib/third_party" />
    <property name="shared_libdir" value="${online_review_home}/lib/shared" />
    <property name="token.properties" value="${online_review_home}/token.properties"/>

    <property name="contest_eligibility_persistence.version" value="1.0.1"/>
    <property name="contest_eligibility_persistence.jar.name" value="contest_eligibility_persistence.jar"/>
    <property name="contest_eligibility_persistence.path"
              value="contest_eligibility_persistence/${contest_eligibility_persistence.version}"/>
    <property name="contest_eligibility_persistence.jar"
              value="${tcs_libdir}/${contest_eligibility_persistence.path}/${contest_eligibility_persistence.jar.name}"/>

    <property name="contest_eligibility_validation.version" value="1.0.1"/>
    <property name="contest_eligibility_validation.jar.name" value="contest_eligibility_validation.jar"/>
    <property name="contest_eligibility_validation.path"
              value="contest_eligibility_validation/${contest_eligibility_validation.version}"/>
    <property name="contest_eligibility_validation.jar"
              value="${tcs_libdir}/${contest_eligibility_validation.path}/${contest_eligibility_validation.jar.name}"/>

    <property name="distribution_tool.version" value="1.0.1"/>
    <property name="distribution_tool.jar.name" value="distribution_tool.jar"/>
    <property name="distribution_tool.path" value="distribution_tool/${distribution_tool.version}"/>
    <property name="distribution_tool.jar"
              value="${tcs_libdir}/${distribution_tool.path}/${distribution_tool.jar.name}"/>

    <property name="job_scheduler.version" value="1.0" />
    <property name="job_scheduler.jar.name" value="job_scheduler.jar" />
    <property name="job_scheduler.path" value="job_scheduler/${job_scheduler.version}" />
    <property name="job_scheduler.jar" value="${tcs_libdir}/${job_scheduler.path}/${job_scheduler.jar.name}" />

    <property name="job_processor.version" value="3.0.1"/>
    <property name="job_processor.jar.name" value="job_processor.jar"/>
    <property name="job_processor.path" value="job_processor/${job_processor.version}"/>
    <property name="job_processor.jar" value="${tcs_libdir}/${job_processor.path}/${job_processor.jar.name}"/>
    
    <property name="job_scheduling.version" value="3.2.0"/>
    <property name="job_scheduling.jar.name" value="job_scheduling.jar"/>
    <property name="job_scheduling.path" value="job_scheduling/${job_scheduling.version}"/>
    <property name="job_scheduling.jar" value="${tcs_libdir}/${job_scheduling.path}/${job_scheduling.jar.name}"/>
    
    <property name="JNDI_Utility.version" value="1.0"/>
    <property name="JNDI_Utility.jar.name" value="JNDI_Utility.jar"/>
    <property name="JNDI_Utility.path" value="JNDI_Utility/${JNDI_Utility.version}"/>
    <property name="JNDI_Utility.jar" value="${tcs_libdir}/${JNDI_Utility.path}/${JNDI_Utility.jar.name}"/>
        
    <property name="object_factory.version" value="2.0.1"/>
    <property name="object_factory.jar.name" value="object_factory.jar"/>
    <property name="object_factory.path" value="object_factory/${object_factory.version}"/>
    <property name="object_factory.jar" value="${tcs_libdir}/${object_factory.path}/${object_factory.jar.name}"/>

    <property name="object_factory_configuration_api_plugin.version" value="1.0.0"/>
    <property name="object_factory_configuration_api_plugin.jar.name"
              value="object_factory_configuration_api_plugin.jar"/>
    <property name="object_factory_configuration_api_plugin.path"
              value="object_factory_configuration_api_plugin/${object_factory_configuration_api_plugin.version}"/>
    <property name="object_factory_configuration_api_plugin.jar"
              value="${tcs_libdir}/${object_factory_configuration_api_plugin.path}/${object_factory_configuration_api_plugin.jar.name}"/>

    <property name="simple_cache.version" value="2.0"/>
    <property name="simple_cache.jar.name" value="simple_cache.jar"/>
    <property name="simple_cache.path" value="simple_cache/${simple_cache.version}"/>
    <property name="simple_cache.jar" value="${tcs_libdir}/${simple_cache.path}/${simple_cache.jar.name}"/>

    <property name="user_project_data_store.version" value="1.0.1"/>
    <property name="user_project_data_store.jar.name" value="user_project_data_store.jar"/>
    <property name="user_project_data_store.path" value="user_project_data_store/${user_project_data_store.version}"/>
    <property name="user_project_data_store.jar"
              value="${tcs_libdir}/${user_project_data_store.path}/${user_project_data_store.jar.name}"/>

    <!-- TCS Dependencies - non-versioned -->
    <property name="projectEJB.path" value="project_ejb"/>
    <property name="projectEJB.jar.name" value="Project.jar"/>
    <property name="projectEJB.jar" value="${tcs_libdir}/${projectEJB.path}/${projectEJB.jar.name}"/>

    <property name="termsOfUseEJB.path" value="terms_of_use_ejb"/>
    <property name="termsOfUseEJB.jar.name" value="TermsOfUse.jar"/>
    <property name="termsOfUseEJB.jar" value="${tcs_libdir}/${termsOfUseEJB.path}/${termsOfUseEJB.jar.name}"/>

    <property name="userEJB.path" value="user_ejb"/>
    <property name="userEJB.jar.name" value="User.jar"/>
    <property name="userEJB.jar" value="${tcs_libdir}/${userEJB.path}/${userEJB.jar.name}"/>

    <property name="securityEJB.path" value="security_ejb"/>
    <property name="securityEJB.jar.name" value="Security.jar"/>
    <property name="securityEJB.jar" value="${tcs_libdir}/${securityEJB.path}/${securityEJB.jar.name}"/>

    <!-- Shared libraries -->
    <property name="catalog.jar.name" value="catalog.jar"/>
    <property name="catalog.jar" value="${shared_libdir}/${catalog.jar.name}"/>

    <property name="forums.jar.name" value="forums.jar"/>
    <property name="forums.jar" value="${shared_libdir}/${forums.jar.name}"/>

    <property name="shared.jar.name" value="shared.jar"/>
    <property name="shared.jar" value="${shared_libdir}/${shared.jar.name}"/>

    <property name="tcIdGenerator.jar.name" value="tc_id_generator.jar"/>
    <property name="tcIdGenerator.jar" value="${tcs_libdir}/${tcIdGenerator.jar.name}"/>

    <property name="tcwebcommon.jar.name" value="tcwebcommon.jar"/>
    <property name="tcwebcommon.jar" value="${shared_libdir}/${tcwebcommon.jar.name}"/>

    <!-- 3rd Party Dependencies  -->
    <property name="ejb3-persistence.jar" value="${ext_libdir}/ejb3-persistence.jar"/>
    <property name="ifx-jdbc.jar" value="${ext_libdir}/ifx-jdbc.jar"/>
    <property name="jboss-ejb3x.jar" value="${ext_libdir}/jboss/jboss-ejb3x.jar"/>
    <property name="jstl.jar" value="${ext_libdir}/jstl.jar"/>
    <property name="jboss-j2ee.jar" value="${ext_libdir}/jboss/jboss-j2ee.jar"/>
    <property name="servlet.jar" value="${cactus.home.tomcat5x}/common/lib/servlet-api.jar"/>
    <property name="jbossall-client.jar" value="${ext_libdir}/jboss/jbossall-client.jar"/>
    <property name="servlet.jsp.jar" value="${cactus.home.tomcat5x}/common/lib/jsp-api.jar"/>
    <property name="jiveforums.jar" value="${ext_libdir}/jiveforums.jar"/>
    <property name="jsp-api.jar" value="${ext_libdir}/jsp-api.jar"/>
    <property name="servlet-api.jar" value="${ext_libdir}/servlet-api.jar"/>
    <property name="struts.jar" value="${ext_libdir}/struts-1.2.9.jar"/>
    <property name="axis.jar" value="${ext_libdir}/axis-dok.jar"/>
    <property name="commons.beanutils.jar" value="${ext_libdir}/commons-beanutils.jar"/>
    <property name="log4j.jar" value="${ext_libdir}/log4j.jar"/>
    <property name="ldapjdk.jar" value="${ext_libdir}/ldapjdk.jar"/>
    <property name="jaf.jar" value="${ext_libdir}/jaf/1.1.1/activation.jar"/>
    <property name="javamail.jar" value="${ext_libdir}/javamail/1.3.3/mail.jar"/>

    <property name="junit.jar" value="${ext_libdir}/testing/junit-3.8.1.jar"/>
    <property name="selenium_client.jar" value="${ext_libdir}/testing/selenium-java-client-driver.jar" />
    <property name="selenium_server.jar" value="${ext_libdir}/testing/selenium-server.jar" />

    <property name="jiveforums.jar.name" value="jiveforums.jar"/>
    <property name="jiveforums.jar" value="${ext_libdir}/${jiveforums.jar.name}"/>

    <property name="jivebase.jar.name" value="jivebase.jar"/>
    <property name="jivebase.jar" value="${ext_libdir}/${jivebase.jar.name}"/>
    <property name="checkstyle.jar" value="${ext_libdir}/checkstyle-all-4.2.jar"/>
    <property name="ant-contrib.jar" value="${ext_libdir}/ant-contrib-1.0b3.jar"/>
    <property name="xerces.jar" value="${ext_libdir}/xerces.jar" />
    <property name="ejb-2_0.jar" value="${ext_libdir}/ejb-2_0.jar" />
    <property name="svnkit.jar" value="${ext_libdir}/svnkit/svnkit.jar"/>
  
    <path id="svnant.lib" >
      <fileset dir="${ext_libdir}/svnant" includes="*.jar" />
    </path>


    <path id="spring_libs">
        <fileset dir="${ext_libdir}/spring">
            <include name="spring-beans.jar"/>
            <include name="spring-core.jar"/>
            <include name="spring-context.jar"/>
            <include name="spring-web.jar"/>
            <include name="spring-webmvc-struts.jar"/>
        </fileset>
    </path>

    <path id="buildlibs">
        <pathelement location="${ejb3-persistence.jar}"/>
        <pathelement location="${jboss-ejb3x.jar}"/>
        <pathelement location="${jbossall-client.jar}"/>
        <pathelement location="${jboss-j2ee.jar}"/>
        <pathelement location="${jiveforums.jar}"/>
        <pathelement location="${jsp-api.jar}"/>
        <pathelement location="${javamail.jar}"/>
        <pathelement location="${servlet-api.jar}"/>
        <pathelement location="${struts.jar}"/>
        <pathelement location="${catalog.jar}"/>
        <pathelement location="${forums.jar}"/>
        <pathelement location="${shared.jar}"/>
        <pathelement location="${tcwebcommon.jar}"/>
        <pathelement location="${projectEJB.jar}"/>
        <pathelement location="${termsOfUseEJB.jar}"/>
        <pathelement location="${userEJB.jar}"/>
        <pathelement location="${securityEJB.jar}"/>
        <pathelement location="${JNDI_Utility.jar}"/>
        <pathelement location="${tcIdGenerator.jar}"/>
        <pathelement location="${contest_eligibility_validation.jar}"/>
        <pathelement location="${contest_eligibility_persistence.jar}"/>
        <pathelement location="${distribution_tool.jar}"/>
        <pathelement location="${job_scheduler.jar}"/>
        <pathelement location="${job_scheduling.jar}"/>
        <pathelement location="${job_processor.jar}"/>
        <pathelement location="${object_factory.jar}"/>
        <pathelement location="${object_factory_configuration_api_plugin.jar}"/>
        <pathelement location="${user_project_data_store.jar}"/>
        <pathelement location="${svnkit.jar}"/>
        <pathelement location="${simple_cache.jar}" />
        <pathelement location="${log4j.jar}" />
        <pathelement location="${ldapjdk.jar}" />
        <pathelement location="${jaf.jar}" />
        <path refid="spring_libs"/>
    </path>

    <macrodef name="scp_windows">
        <attribute name="id"/>
        <attribute name="file"/>
        <attribute name="remotefile"/>
        <attribute name="isdir"/>

        <sequential>
            <condition property="@{id}0" value="-r" else="">
                <and>
                    <istrue value="@{isdir}"/>
                </and>
            </condition>

            <!-- if defined a key file add to command line -->
            <condition property="@{id}1" value="${@{id}0} -i ${scp_keyfile}" else="${@{id}0}">
                <and>
                    <isset property="scp_keyfile"/>
                </and>
            </condition>

            <!-- if defined user add to command line -->
            <condition property="@{id}2" value="${@{id}1} -l ${scp_username}" else="${@{id}1}">
                <and>
                    <isset property="scp_username"/>
                </and>
            </condition>

            <!-- if defined password add to command line-->
            <condition property="@{id}3" value="${@{id}2} -pw ${scp_password}" else="${@{id}2}">
                <and>
                    <isset property="scp_password"/>
                </and>
            </condition>

            <property name="scp_commandline@{id}" value="${@{id}3} @{file} ${scp_remoteserver}:@{remotefile}"/>

            <echo message="scp_commandline: ${scp_commandline@{id}}"/>

            <exec executable="${scp_path}">
                <arg line="${scp_commandline@{id}}"/>
            </exec>
        </sequential>
    </macrodef>

    <macrodef name="scp_unix">
        <attribute name="id"/>
        <attribute name="file"/>
        <attribute name="remotefile"/>
        <attribute name="isdir"/>

        <sequential>
            <!-- Unix has to run in 'batch mode' and you must previously setup the remote box to not need password prompt -->
            <condition property="@{id}0" value="-B -r" else="-B">
                <and>
                    <istrue value="@{isdir}"/>
                </and>
            </condition>

            <!-- if defined a key file add to command line -->
            <condition property="@{id}1" value="${@{id}0} -i ${scp_keyfile}" else="${@{id}0}">
                <and>
                    <isset property="scp_keyfile"/>
                </and>
            </condition>

            <!-- if defined user add to command line -->
            <condition property="scp_commandline@{id}"
                       value="${@{id}1} @{file} ${scp_username}@${scp_remoteserver}:@{remotefile}"
                       else="${@{id}1} @{file} ${scp_remoteserver}:@{remotefile}">
                <and>
                    <isset property="scp_username"/>
                </and>
            </condition>

            <property name="" value="${@{id}3} @{file} ${scp_remoteserver}:@{remotefile}"/>

            <echo message="scp_commandline: ${scp_commandline@{id}}"/>

            <exec executable="${scp_path}">
                <arg line="${scp_commandline@{id}}"/>
            </exec>
        </sequential>
    </macrodef>
</project>