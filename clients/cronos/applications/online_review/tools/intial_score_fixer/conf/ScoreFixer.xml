<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE CMConfig [
    <!ENTITY databaseUrl "jdbc:informix-sqli://ysakhno-xp:1526/review:informixserver=top_coder">
    <!ENTITY databaseUsername "informix">
    <!ENTITY databasePassword "informix">
]>
<CMConfig>

    <!--
        ==========  Configuration for DB Connection Factory component ==========
    -->
    <Config name="com.topcoder.db.connectionfactory.DBConnectionFactoryImpl">
        <Property name="connections">
            <Property name="default">
                <Value>tcs</Value>
            </Property>
            <Property name="tcs">
                <Property name="producer">
                    <Value>com.topcoder.db.connectionfactory.producers.JDBCConnectionProducer</Value>
                </Property>
                <Property name="parameters">
                    <Property name="jdbc_driver">
                        <Value>com.informix.jdbc.IfxDriver</Value>
                    </Property>
                    <Property name="jdbc_url">
                        <Value>&databaseUrl;</Value>
                    </Property>
                    <Property name="user">
                        <Value>&databaseUsername;</Value>
                    </Property>
                    <Property name="password">
                        <Value>&databasePassword;</Value>
                    </Property>
                </Property>
            </Property>
        </Property>
    </Config>


    <!--
        ===============  Configuration for Log Factory component  ===============
    -->
    <Config name="com.topcoder.util.log">
        <Property name="logClass">
            <Value>com.topcoder.util.log.basic.BasicLog</Value>
        </Property>
        <Property name="basic.log.target">
            <Value>System.err</Value>
        </Property>
    </Config>


    <!--
        ========== Configuration for Review Score Calculator component ==========
    -->
    <Config name="com.topcoder.management.review.scorecalculator.CalculationManager">
        <Property name="use_caching">
            <Value>false</Value>
        </Property>
        <Property name="builder_class">
            <Value>com.topcoder.management.review.scorecalculator.builders.DefaultScorecardMatrixBuilder</Value>
        </Property>

        <Property name="calculators">
            <!-- Configuration for Scale (1-4) question type -->
            <Property name="Scale4">
                <Property name="question_type">
                    <Value>1</Value>
                </Property>
                <Property name="class">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.ScaledScoreCalculator</Value>
                </Property>
                <Property name="namespace">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.Scale4</Value>
                </Property>
            </Property>

            <!-- Configuration for Scale (1-10) question type -->
            <Property name="Scale10">
                <Property name="question_type">
                    <Value>2</Value>
                </Property>
                <Property name="class">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.ScaledScoreCalculator</Value>
                </Property>
                <Property name="namespace">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.Scale10</Value>
                </Property>
            </Property>

            <!-- Configuration for Scale (0-3) question type -->
            <Property name="Scale3">
                <Property name="question_type">
                    <Value>5</Value>
                </Property>
                <Property name="class">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.ScaledScoreCalculator</Value>
                </Property>
                <Property name="namespace">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.Scale3</Value>
                </Property>
            </Property>

            <!-- Configuration for Scale (0-9) question type -->
            <Property name="Scale9">
                <Property name="question_type">
                    <Value>6</Value>
                </Property>
                <Property name="class">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.ScaledScoreCalculator</Value>
                </Property>
                <Property name="namespace">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.Scale9</Value>
                </Property>
            </Property>

            <!-- Configuration for Test Case question type -->
            <Property name="dynamicCalculator">
                <Property name="question_type">
                    <Value>3</Value>
                </Property>
                <Property name="class">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.ScaledScoreCalculator</Value>
                </Property>
            </Property>

            <!-- Configuration for Yes/No question type -->
            <Property name="binaryCalculator">
                <!-- This sub-property describes the question type id -->
                <Property name="question_type">
                    <Value>4</Value>
                </Property>
                <Property name="class">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.BinaryScoreCalculator</Value>
                </Property>
                <Property name="namespace">
                    <Value>com.topcoder.management.review.scorecalculator.calculators.BinaryScoreCalculator</Value>
                </Property>
            </Property>
        </Property>
    </Config>

    <!-- Configuration for binary calculator -->
    <Config name="com.topcoder.management.review.scorecalculator.calculators.BinaryScoreCalculator">
        <Property name="positive_answer">
            <Value>1</Value>
        </Property>
        <Property name="negative_answer">
            <Value>0</Value>
        </Property>
    </Config>

    <Config name="com.topcoder.management.review.scorecalculator.calculators.Scale4">
        <Property name="default_scale">
            <Value>4</Value>
        </Property>
    </Config>

    <Config name="com.topcoder.management.review.scorecalculator.calculators.Scale10">
        <Property name="default_scale">
            <Value>10</Value>
        </Property>
    </Config>

    <Config name="com.topcoder.management.review.scorecalculator.calculators.Scale3">
        <Property name="default_scale">
            <Value>3</Value>
        </Property>
    </Config>

    <Config name="com.topcoder.management.review.scorecalculator.calculators.Scale9">
        <Property name="default_scale">
            <Value>9</Value>
        </Property>
    </Config>


    <!--
        ==========  Configuration for Scorecard Management component  ==========
    -->
    <Config name="com.topcoder.management.scorecard">
        <Property name="SearchBuilderNamespace">
            <Value>com.topcoder.searchbuilder.common</Value>
        </Property>
        <Property name="PersistenceClass">
            <Value>com.topcoder.management.scorecard.persistence.InformixScorecardPersistence</Value>
        </Property>
        <Property name="PersistenceNamespace">
            <Value>com.topcoder.management.scorecard.persistence.InformixScorecardPersistence</Value>
        </Property>
        <Property name="ValidatorClass">
            <Value>com.topcoder.management.scorecard.validation.DefaultScorecardValidator</Value>
        </Property>
        <Property name="ValidatorNamespace">
            <Value>com.topcoder.management.scorecard.validation.DefaultScorecardValidator</Value>
        </Property>
    </Config>


    <!--
        =====  Configuration for Scorecard Management Persistence component  =====
    -->
    <Config name="com.topcoder.management.scorecard.persistence.InformixScorecardPersistence">
        <Property name="ConnectionFactoryNS">
            <Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
        </Property>
        <Property name="ConnectionName">
            <Value>tcs</Value>
        </Property>
    </Config>


    <!--
        ========== Configuration for Review Management component ==========
    -->
    <Config name="com.topcoder.management.review.DefaultReviewManager">
        <Property name="persistence">
            <Property name="persistence_namespace">
                <Value>com.topcoder.management.review.persistence.InformixReviewPersistence</Value>
            </Property>
            <Property name="persistence_class">
                <Value>com.topcoder.management.review.persistence.InformixReviewPersistence</Value>
            </Property>
        </Property>
    </Config>


    <!--
        ===== Configuration for Review Management Persistence component =====
    -->
    <Config name="com.topcoder.management.review.persistence.InformixReviewPersistence">
        <Property name="connection">
            <!-- the connection name to retrieve connection in DB Connection Factory, required -->
            <Property name="name">
                <Value>tcs</Value>
            </Property>
            <!-- The DBConnectionFactory class name used to create DB Connection Factory, required -->
            <Property name="factory_namespace">
                <Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
            </Property>
            <Property name="factory_class">
                <Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
            </Property>
        </Property>

        <Property name="search_bundle_manager_namespace">
            <Value>com.topcoder.searchbuilder.common</Value>
        </Property>
        <Property name="search_bundle_name">
            <Value>Review Search Bundle</Value>
        </Property>
    </Config>


    <!--
        ==========  Configuration for Search Builder component  ==========
    -->
    <Config name="com.topcoder.searchbuilder.common">
        <Property name="searchStrategyFactoryNamespace">
            <Value>com.topcoder.search.builder.strategy.factory</Value>
        </Property>
        <Property name="fieldValidatorFactoryNamespace">
            <Value>com.topcoder.search.builder.validator.factory</Value>
        </Property>

        <Property name="searchBundles">
            <!-- Scorecard-searching logic -->
            <Property name="ScorecardSearchBundle">
                <Property name="type">
                    <Value>Database</Value>
                </Property>
                <Property name="name">
                    <Value>ScorecardSearchBundle</Value>
                </Property>

                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>

                <Property name="searchableFields">
                    <Property name="dummy">
                        <Property name="validator">
                            <Property name="class">
                                <Value>validator</Value>
                            </Property>
                            <Property name="identifier">
                                <Value>default</Value>
                            </Property>
                        </Property>
                    </Property>
                </Property>

                <Property name="context">
                    <Value>
                        SELECT DISTINCT scorecard_id,
                               scorecard.scorecard_status_id AS status_id,
                               scorecard.scorecard_type_id AS type_id,
                               scorecard.project_category_id AS project_category_id,
                               scorecard.name AS scorecard_name,
                               version,
                               min_score,
                               max_score,
                               scorecard.create_user AS create_user,
                               scorecard.create_date AS create_date,
                               scorecard.modify_user AS modify_user,
                               scorecard.modify_date AS modify_date,
                               scorecard_status_lu.name AS status_name,
                               scorecard_type_lu.name AS type_name
                          FROM scorecard,
                               scorecard_status_lu,
                               scorecard_type_lu,
                               project_category_lu
                         WHERE scorecard.scorecard_status_id = scorecard_status_lu.scorecard_status_id
                           AND scorecard.scorecard_type_id = scorecard_type_lu.scorecard_type_id
                           AND scorecard.project_category_id = project_category_lu.project_category_id
                           AND
                    </Value>
                </Property>

                <Property name="alias">
                    <Property name="ScorecardStatusID">
                        <Value>scorecard_status_lu.scorecard_status_id</Value>
                    </Property>
                    <Property name="ScorecardStatusName">
                        <Value>scorecard_status_lu.name</Value>
                    </Property>
                    <Property name="ScorecardTypeID">
                        <Value>scorecard_type_lu.scorecard_type_id</Value>
                    </Property>
                    <Property name="ScorecardTypeName">
                        <Value>scorecard_type_lu.name</Value>
                    </Property>
                    <Property name="ProjectCategoryID">
                        <Value>project_category_lu.project_category_id</Value>
                    </Property>
                    <Property name="ScorecardName">
                        <Value>scorecard.name</Value>
                    </Property>
                    <Property name="ScorecardVersion">
                        <Value>scorecard.version</Value>
                    </Property>
                </Property>
            </Property>

            <!-- Review-searching logic -->
            <Property name="Review Search Bundle">
                <Property name="searchStrategy">
                    <Property name="class">
                        <Value>dbStrategy</Value>
                    </Property>
                </Property>

                <Property name="type">
                    <Value>Database</Value>
                </Property>
                <Property name="name">
                    <Value>Review Search Bundle</Value>
                </Property>

                <Property name="context">
                    <Value>
                        SELECT DISTINCT review_id,
                               review.resource_id AS resource_id,
                               review.submission_id AS submission_id,
                               review.scorecard_id AS scorecard_id,
                               committed,
                               score,
                               initial_score,
                               review.create_user AS create_user,
                               review.create_date AS create_date,
                               review.modify_user AS modify_user,
                               review.modify_date AS modify_date
                          FROM review,
                               scorecard,
                               resource
                         WHERE review.scorecard_id = scorecard.scorecard_id
                           AND review.resource_id = resource.resource_id
                           AND
                    </Value>
                </Property>

                <Property name="alias">
                    <Property name="scorecardType">
                        <Value>scorecard.scorecard_type_id</Value>
                    </Property>
                    <Property name="reviewer">
                        <Value>review.resource_id</Value>
                    </Property>
                    <Property name="submission">
                        <Value>review.submission_id</Value>
                    </Property>
                    <Property name="committed">
                        <Value>review.committed</Value>
                    </Property>
                    <Property name="score">
                        <Value>review.score</Value>
                    </Property>
                    <Property name="initial_score">
                        <Value>review.initial_score</Value>
                    </Property>
                    <Property name="project">
                        <Value>resource.project_id</Value>
                    </Property>
                    <Property name="creation_date">
                        <Value>review.create_date</Value>
                    </Property>
                </Property>

                <Property name="searchableFields">
                    <Property name="scorecardType">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="reviewer">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="submission">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="committed">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="score">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="initial_score">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="project">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                    <Property name="creation_date">
                        <Property name="validator">
                            <Property name="class"><Value>validator</Value></Property>
                            <Property name="identifier"><Value>default</Value></Property>
                        </Property>
                    </Property>
                </Property>
            </Property>
        </Property>
    </Config>

    <!-- Object Factory configuration for validator -->
    <Config name="com.topcoder.search.builder.validator.factory">
        <Property name="validator:default">
            <Property name="type">
                <Value>com.topcoder.util.datavalidator.NotValidator</Value>
            </Property>
            <Property name="params">
                <Property name="param1">
                    <Property name="name"><Value>validator:null</Value></Property>
                </Property>
            </Property>
        </Property>
        <Property name="validator:null">
            <Property name="type"><Value>com.topcoder.util.datavalidator.NullValidator</Value></Property>
        </Property>
    </Config>

    <!-- Object factory configuration for DBStrategy -->
    <Config name="com.topcoder.search.builder.strategy.factory">
        <Property name="dbStrategy">
            <Property name="type">
                <Value>com.topcoder.search.builder.database.DatabaseSearchStrategy</Value>
            </Property>
            <Property name="params">
                <Property name="param1">
                    <Property name="type"><Value>String</Value></Property>
                    <Property name="value"><Value>com.topcoder.search.builder.database.DBSearchStrategy</Value></Property>
                </Property>
            </Property>
        </Property>
    </Config>

    <!-- Configuration for DBSearchStrategy -->
    <Config name="com.topcoder.search.builder.database.DBSearchStrategy">
        <!-- Property defining a specification for constructing the dbConnectionFactory to use. -->
        <Property name="connectionFactory">
            <!-- The namespace of the ConnectionFactory -->
            <Property name="name">
                <Value>com.topcoder.db.connectionfactory.DBConnectionFactoryImpl</Value>
            </Property>
        </Property>

        <!--
            The name to request from the connection factory when acquiring a connection.
            If not present, then the default connection is used.
        -->
        <Property name="connectionName">
            <Value>tcs</Value>
        </Property>

        <Property name="searchFragmentFactoryNamespace">
            <Value>com.topcoder.search.builder.database.factory</Value>
        </Property>

        <Property name="searchFragmentBuilders">
            <Property name="first">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.AndFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.AndFragmentBuilder</Value></Property>
            </Property>
            <Property name="second">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.OrFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.OrFragmentBuilder</Value></Property>
            </Property>
            <Property name="third">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.LikeFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.LikeFragmentBuilder</Value></Property>
            </Property>
            <Property name="fourth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.NotFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.NotFragmentBuilder</Value></Property>
            </Property>
            <Property name="fifth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.EqualToFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.EqualsFragmentBuilder</Value></Property>
            </Property>
            <Property name="sixth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.InFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.InFragmentBuilder</Value></Property>
            </Property>
            <Property name="eighth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.NullFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.NullFragmentBuilder</Value></Property>
            </Property>
            <Property name="ninth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.GreaterThanFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value></Property>
            </Property>
            <Property name="tenth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.GreaterThanOrEqualToFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value></Property>
            </Property>
            <Property name="eleventh">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.BetweenFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value></Property>
            </Property>
            <Property name="twelvth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.LessThanOrEqualToFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value></Property>
            </Property>
            <Property name="thirteenth">
                <Property name="targetFilter"><Value>com.topcoder.search.builder.filter.LessThanFilter</Value></Property>
                <Property name="className"><Value>com.topcoder.search.builder.database.RangeFragmentBuilder</Value></Property>
            </Property>
        </Property>
    </Config>

    <Config name="com.topcoder.search.builder.database.factory" />

    <!--
        ===============  Configuration for Log Factory component  ===============
    -->
    <Config name="com.topcoder.util.log">
        <Property name="logClass">
            <Value>com.topcoder.util.log.log4j.Log4jLog</Value>
        </Property>
    </Config>


</CMConfig>
